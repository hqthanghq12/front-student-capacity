<div class="p-2">
    <ng-toasty position="toaster-top-right"></ng-toasty>
    <div class="border-bottom">
        <h3 class=" fs-5 primary-color">Hồ sơ của tôi</h3>
        <p style="margin-top: -12px;" class="color-gray">Quản lý thông tin hồ sơ để bảo mật tài khoản</p>
    </div>
    <mat-progress-bar color="warn" *ngIf="statusEditUser == true" class="loading-page" mode="indeterminate">
    </mat-progress-bar>
    <form class="profile-user-body my-4 text-center">
        <div class="avatar-upload d-flex justify-content-center">
            <div class="avatar-edit">
                <input #file type='file' accept='image/*' (change)="preview(file.files)" id="imageUpload"
                    accept=".png, .jpg, .jpeg" />
                <label for="imageUpload"></label>
            </div>
            <div class="avatar-preview">
                <img [src]="imgURL" id="imagePreview" class="register-avatar-team" *ngIf="imgURL" alt="">
            </div>
        </div>
        <h5 class="text-center fs-6 fw-bold">Ảnh nhóm</h5>
        <p class="color-gray text-center">Dụng lượng file tối đa 1 MB
            Định dạng:.JPEG, .PNG</p>
        <div class="pt-4 d-flex justify-content-center">
            <div class="register-input-box">
                <input type="text" (keyup)="setNameUser($event)" [value]=" userInfo.name" class="register-input-text">
                <label for="" class="register-label">Tên của bạn</label>
            </div>
        </div>
        <div class="pt-4 d-flex justify-content-center">
            <div class="register-input-box">
                <input type="text" [value]=" userInfo?.campus?.name" class="register-input-text" disabled>
                <label for="" class="register-label">Cơ sở</label>
            </div>
        </div>
        <button class="mt-4 btn btn-base-type-bg" (click)="EditInFoUser()">Sửa thông
            tin</button>
    </form>


    <div class="border-bottom mt-5">
        <h3 class=" fs-5 primary-color">Đổi mật khẩu tài khoản</h3>
    </div>

    <form class="profile-user-body my-4 text-center" [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="pt-4 d-flex justify-content-center">
            <div class="register-input-box">
                <input id="oldPassword" type="password" class="register-input-text" formControlName="oldPassword" #p>
                <label for="" class="register-label">Mật khẩu cũ</label>
                <div *ngIf="oldPassword.invalid && (oldPassword.dirty || oldPassword.touched)" class="form-text text-danger">
                    <div *ngIf="oldPassword.errors?.['required']">
                        Vui lòng nhập mật khẩu cũ
                    </div>
                    <div *ngIf="oldPassword.errors?.['minlength']">
                        Mật khẩu phải có ít nhất 8 ký tự
                    </div>
                </div>
            </div>
        </div>
        <div class="pt-4 d-flex justify-content-center">
            <div class="register-input-box">
                <input type="password" class="register-input-text" formControlName="newPassword" #pw>
                <label for="" class="register-label">Mật khẩu mới</label>
                <div *ngIf="newPassword.invalid && (newPassword.dirty || newPassword.touched)" class="form-text text-danger">
                    <div *ngIf="newPassword.errors?.['required']">
                        Vui lòng nhập mật khẩu mới
                    </div>
                    <div *ngIf="oldPassword.errors?.['minlength']">
                        Mật khẩu phải có ít nhất 8 ký tự
                    </div>
                    <div *ngIf="newPassword.errors?.['pattern']">
                        Mật khẩu phải chứa ít nhất một số, một chữ hoa và một
                        chữ thường <br> ít nhất 8 ký tự<br />
                        Mật khẩu không được chứa khoảng trắng
                    </div>
                </div>
            </div>
        </div>
        <div class="pt-4 d-flex justify-content-center">
            <div class="register-input-box">
                <input type="password" class="register-input-text" formControlName="confirmPassword" #cpw>
                <label for="" class="register-label">Nhập lại mật khẩu mới</label>
                <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)" class="form-text text-danger">
                    <div *ngIf="confirmPassword.errors?.['required']">
                        Vui lòng nhập lại mật khẩu mới
                    </div>
                    <div *ngIf="oldPassword.errors?.['minlength']">
                        Mật khẩu phải có ít nhất 8 ký tự
                    </div>
                    <div *ngIf="confirmPassword.errors?.['pattern']">
                        Mật khẩu phải chứa ít nhất một số, một chữ hoa và một
                        chữ thường <br> ít nhất 8 ký tự<br />
                        Mật khẩu không được chứa khoảng trắng
                    </div>
                    <div *ngIf="confirmPassword.errors?.['confirmedValidator']">
                        Mật khẩu không khớp
                    </div>
                </div>
            </div>
        </div>
        <!-- <button class="mt-4 btn btn-base-type-bg" (click)="EditInFoUser()">Cập nhật mật khẩu</button> -->
        <button *ngIf="disabledButton" disabled data-mdb-button-init data-mdb-ripple-init class="mt-4 btn btn-base-type-bg" 
            style="padding-left: 2.5rem; padding-right: 2.5rem;">
            <div class="spinner-border spinner-border-sm" role="status">
                <span class="sr-only">Loading...</span>
            </div> Cập nhật mật khẩu
        </button>

            <button *ngIf="!disabledButton" type="submit" [disabled]="userForm.invalid" data-mdb-button-init
                data-mdb-ripple-init class="mt-4 btn btn-base-type-bg"
                style="padding-left: 2.5rem; padding-right: 2.5rem;">Cập nhật mật khẩu</button>
    </form>


    <!-- <mat-accordion>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    This is the expansion title
                </mat-panel-title>
                <mat-panel-description>
                    This is a summary of the content
                </mat-panel-description>
            </mat-expansion-panel-header>
            <p>This is the primary content of the panel.</p>
        </mat-expansion-panel>
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    Self aware panel
                </mat-panel-title>
                <mat-panel-description>

                </mat-panel-description>
            </mat-expansion-panel-header>
            <p>I'm visible because I am open</p>
        </mat-expansion-panel>
    </mat-accordion> -->
</div>
